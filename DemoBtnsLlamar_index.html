<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Botones</title>
  <style>
    .boton {
      background-color: #007bff;
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
    }
  </style>
</head>
<body>

  <button class="boton" id="llamarBtn">LLAMAR</button>
  <button class="boton" id="muteBtn">LLAMADA MUTEADA</button>

  <!-- Include the CJS SDK -->
  <script src="https://sdk-cdn.mypurecloud.com/javascript/latest/purecloud-platform-client-v2.min.js"></script>  

  <script type="text/javascript">

    document.addEventListener("DOMContentLoaded", function() {
      const llamarBtn = document.getElementById("llamarBtn");
      
      llamarBtn.addEventListener("click", function() {
        const platformClient = require("platformClient");
        const client = platformClient.ApiClient.instance;
        client.setEnvironment(platformClient.PureCloudRegionHosts.sa_east_1);

        if (state) {
          // Authenticated
          const payload = JSON.parse(decodeURIComponent(state));
  
          api.loginImplicitGrant(
              "b6842dcd-c15b-4db9-a8fb-001e1057a629",
              "https://rodardila9.github.io/demoMakeCallButons/DemoBtnsLlamar_index.html"
            )
            .then(() => {

              const apiInstance = new platformClient.ConversationsApi();
              const body = {
                "callFromQueueId": "231b12d6-d673-4158-945e-85cee0f579da", //Cola: Pruebas_Outbound 
                "phoneNumber": "3112816084",
                "callerId": "573009137762",
                "callerIdName": "Genesys"
              }; // Object | Call request
      
              apiInstance.postConversationsCalls(body)
                .then((data) => {
                  console.log(`postConversationsCalls success! data: ${JSON.stringify(data, null, 2)}`);
                })
                .catch((err) => {
                  console.log("There was a failure calling postConversationsCalls");
                  console.error(err);
                });

            });
         }    
    });
  });

    document.addEventListener("DOMContentLoaded", function() {
      const muteBtn = document.getElementById("muteBtn");
      
      muteBtn.addEventListener("click", function() {
        const platformClient = require("platformClient");
        const client = platformClient.ApiClient.instance;
        client.setEnvironment(platformClient.PureCloudRegionHosts.sa_east_1);

        if (state) {
          // Authenticated
          const payload = JSON.parse(decodeURIComponent(state));
  
          api.loginImplicitGrant(
              "b6842dcd-c15b-4db9-a8fb-001e1057a629",
              "https://rodardila9.github.io/demoMakeCallButons/DemoBtnsLlamar_index.html"
            )
            .then(() => {

              const apiInstance = new platformClient.ConversationsApi();
              const body = {
                "callFromQueueId": "87c4d826-ccc8-4269-a099-2f6fd606a78d", //Cola: Pruebas_Outbound-muted 
                "phoneNumber": "3112816084",
                "callerId": "573009137762",
                "callerIdName": "Genesys"
              }; // Object | Call request
      
              apiInstance.postConversationsCalls(body)
                .then((data) => {
                  console.log(`postConversationsCalls success! data: ${JSON.stringify(data, null, 2)}`);
                })
                .catch((err) => {
                  console.log("There was a failure calling postConversationsCalls");
                  console.error(err);
                });

            });
         }   


      });
    });
  </script>
</body>
</html>
